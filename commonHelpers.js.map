{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentTime = Date.now();\nlet userSelectedDate = '';\n\nconst btnRef = document.querySelector('.btn');\nconst inputRef = document.querySelector('.input');\nconst daysRef = document.querySelector('span[data-days]');\nconst hoursRef = document.querySelector('span[data-hours]');\nconst minutesRef = document.querySelector('span[data-minutes]');\nconst secondsRef = document.querySelector('span[data-seconds]');\n\nconst errorOptions = {\n  class: 'iziToast-alert',\n  title: 'Error',\n  message: 'Please choose a date in the future',\n  position: 'topRight',\n  backgroundColor: '#EF4040',\n  messageColor: '#FFFFFF',\n  messageSize: '16px',\n  messageLineHeight: '1.5',\n  titleColor: '#FFFFFF',\n  titleSize: '16px',\n  titleLineHeight: '1.5',\n  iconUrl: './img/icon-x-octagon.svg',\n};\nconst formatStr = 'l';\n\nconst options = {\n  locale: {\n    firstDayOfWeek: 1,\n  },\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    if (userSelectedDate.getTime() < currentTime) {\n      iziToast.error(errorOptions);\n\n      // window.alert('Please choose a date in the future');\n\n      btnRef.disabled = true;\n    } else {\n      btnRef.disabled = false;\n    }\n\n    // console.log(selectedDates[0]);\n  },\n};\n\nconst fp = flatpickr(inputRef, options); // flatpickr\n\ninputRef.addEventListener('focus', () => {\n  fp.config.defaultDate = new Date();\n});\n\nbtnRef.addEventListener('click', onbtnRefClick);\n\nfunction onbtnRefClick(event) {\n  const intervalId = setInterval(timer, 1000);\n  function timer() {\n    currentTime = Date.now();\n    const selectedTime = userSelectedDate.getTime();\n    const deltaTime = selectedTime - currentTime;\n    const { days, hours, minutes, seconds } = convertMs(deltaTime);\n    daysRef.textContent = `${days}`;\n    hoursRef.textContent = `${hours}`;\n    minutesRef.textContent = `${minutes}`;\n    secondsRef.textContent = `${seconds}`;\n    if (deltaTime <= 1000) {\n      clearInterval(intervalId);\n    }\n    // console.log(`${days}:${hours}:${minutes}:${seconds}`);\n  }\n\n  btnRef.disabled = true;\n  inputRef.disabled = true;\n}\n\n// console.log(time);\n// console.log(userSelectedDate);\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n}\n\n// console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n// console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n// console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}"],"names":["currentTime","userSelectedDate","btnRef","inputRef","daysRef","hoursRef","minutesRef","secondsRef","errorOptions","options","selectedDates","iziToast","fp","flatpickr","onbtnRefClick","event","intervalId","timer","deltaTime","days","hours","minutes","seconds","convertMs","addLeadingZero","value","ms"],"mappings":"2FAMA,IAAIA,EAAc,KAAK,MACnBC,EAAmB,GAEvB,MAAMC,EAAS,SAAS,cAAc,MAAM,EACtCC,EAAW,SAAS,cAAc,QAAQ,EAC1CC,EAAU,SAAS,cAAc,iBAAiB,EAClDC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAa,SAAS,cAAc,oBAAoB,EACxDC,EAAa,SAAS,cAAc,oBAAoB,EAExDC,EAAe,CACnB,MAAO,iBACP,MAAO,QACP,QAAS,qCACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,YAAa,OACb,kBAAmB,MACnB,WAAY,UACZ,UAAW,OACX,gBAAiB,MACjB,QAAS,0BACX,EAGMC,EAAU,CACd,OAAQ,CACN,eAAgB,CACjB,EACD,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CACrBT,EAAmBS,EAAc,GAC7BT,EAAiB,QAAS,EAAGD,GAC/BW,EAAS,MAAMH,CAAY,EAI3BN,EAAO,SAAW,IAElBA,EAAO,SAAW,EAIrB,CACH,EAEMU,EAAKC,EAAUV,EAAUM,CAAO,EAEtCN,EAAS,iBAAiB,QAAS,IAAM,CACvCS,EAAG,OAAO,YAAc,IAAI,IAC9B,CAAC,EAEDV,EAAO,iBAAiB,QAASY,CAAa,EAE9C,SAASA,EAAcC,EAAO,CAC5B,MAAMC,EAAa,YAAYC,EAAO,GAAI,EAC1C,SAASA,GAAQ,CACfjB,EAAc,KAAK,MAEnB,MAAMkB,EADejB,EAAiB,UACLD,EAC3B,CAAE,KAAAmB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAS,EAC7Dd,EAAQ,YAAc,GAAGe,IACzBd,EAAS,YAAc,GAAGe,IAC1Bd,EAAW,YAAc,GAAGe,IAC5Bd,EAAW,YAAc,GAAGe,IACxBJ,GAAa,KACf,cAAcF,CAAU,CAG3B,CAEDd,EAAO,SAAW,GAClBC,EAAS,SAAW,EACtB,CAKA,SAASqB,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASF,EAAUG,EAAI,CAQrB,MAAMP,EAAOK,EAAe,KAAK,MAAME,EAAK,KAAG,CAAC,EAE1CN,EAAQI,EAAe,KAAK,MAAOE,EAAK,MAAO,IAAI,CAAC,EAEpDL,EAAUG,EAAe,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEJ,EAAUE,EACd,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}